---

---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>Astro</title>
  </head>
  <body class="h-screen">
    <div id="sketch" class="w-full h-full"></div>
  </body>
</html>

<script>
  import p5 from "p5";

  const sketchElement = document.querySelector("#sketch") as HTMLElement;
  const canvasWidth = sketchElement?.clientWidth || 0;
  const canvasHeight = sketchElement?.clientHeight || 0;

  const sketch = (p5: p5) => {
    let t = 0;

    p5.setup = () => {
      console.log("Setup");
      p5.createCanvas(canvasWidth, canvasHeight);
      p5.stroke(255, 200, 22);
      p5.noFill();
    };

    p5.draw = () => {
      console.log("Draw");
      if (t > 0) {
        p5.translate(p5.width / 2, p5.height / 2);
        const n = p5.noise;
        const a = 0.5 * p5.min(p5.width, p5.height);
        let b = n(t) * 6;
        let c = n(t + 60) * 6;
        p5.line(p5.cos(b) * a, p5.sin(b) * a, p5.cos(c) * a, p5.sin(c) * a);
      }
      t++;
    };

    p5.mouseClicked = () => {
      p5.remove();
    };

    p5.windowResized = () => {
      const newElement = document.querySelector("#sketch") as HTMLElement;
      p5.resizeCanvas(newElement?.clientWidth, newElement?.clientHeight);
      t = 0;
      p5.draw();
    };
  };

  new p5(sketch, sketchElement);
</script>
